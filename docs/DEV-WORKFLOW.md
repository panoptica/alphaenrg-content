# Development Workflow - Hierarchical AI Coding

## Model Hierarchy

Our development stack uses different AI models based on task complexity:

### üèóÔ∏è Senior/Lead Developer: **Claude Opus**
- **Usage**: Architecture decisions, complex refactoring, code reviews
- **Command**: `/model anthropic/claude-opus-4-6` 
- **Cost**: ¬£15/MTok input, ¬£75/MTok output
- **When to use**: 
  - System design and architecture
  - Complex debugging across multiple files
  - Performance optimization
  - Security reviews
  - API design

### üë®‚Äçüíª Mid-Level Developer: **Qwen 2.5 7B (Local)**
- **Usage**: Implementation, debugging, feature development
- **Command**: `/model local-ollama/qwen2.5:7b`
- **Cost**: FREE (runs on Mac Mini M4)
- **When to use**:
  - Writing new functions/classes
  - Bug fixes
  - Unit tests
  - Code refactoring
  - Documentation

### üß† Reasoning Specialist: **DeepSeek R1 8B (Local)**
- **Usage**: Algorithm design, problem-solving
- **Command**: `/model local-ollama/deepseek-r1:8b`
- **Cost**: FREE (runs on Mac Mini M4)
- **When to use**:
  - Complex logic problems
  - Algorithm optimization
  - Mathematical computations
  - Data analysis patterns

### üë∂ Junior Developer: **Llama 3 8B (Local)**
- **Usage**: Basic tasks, documentation, simple scripts
- **Command**: Default model
- **Cost**: FREE (runs on Mac Mini M4)
- **When to use**:
  - Simple scripts
  - Documentation updates
  - Basic file operations
  - General assistance

## Workflow

### 1. Planning (Senior Dev - Opus)
```bash
/model anthropic/claude-opus-4-6
# Discuss overall architecture and approach
```

### 2. Implementation (Mid-Level - Qwen)
```bash
/model local-ollama/qwen2.5:7b
# Write the actual code
```

### 3. Testing & Docs (Junior - Llama 3)
```bash
/model default
# Write tests and update documentation
```

### 4. Review (Senior Dev - Opus)
```bash
/model anthropic/claude-opus-4-6
# Final review and optimization
```

## CI/CD Pipeline

### Automated Testing
- **Trigger**: Every push to `master`
- **Tests**: Unit tests, integration tests, linting
- **Coverage**: Minimum 80% for critical components

### Auto-Documentation
- **Daily**: Updates API docs and README
- **Triggered by**: Code changes in energy-agent/

### Deployment
- **Energy Agent**: Auto-deploys to Mac Mini cron
- **Infrastructure**: Manual approval for system changes

## GitHub Integration

### Repository Structure
```
/workspace
‚îú‚îÄ‚îÄ energy-agent/          # Main trading algorithm
‚îú‚îÄ‚îÄ empire-heartbeat/       # Infrastructure monitoring  
‚îú‚îÄ‚îÄ specs/                  # Technical specifications
‚îú‚îÄ‚îÄ docs/                   # Generated documentation
‚îú‚îÄ‚îÄ .github/workflows/      # CI/CD automation
‚îî‚îÄ‚îÄ memory/                 # Daily logs and learnings
```

### Branch Protection
- **master**: Protected, requires PR + CI success
- **feature/***: Development branches
- **hotfix/***: Emergency fixes

### Secrets Required
- `TELEGRAM_BOT_TOKEN`: For CI notifications
- `TELEGRAM_CHAT_ID`: Your chat ID (6005711731)

## Daily Workflow

### 7:00 AM - Digest Runs
- Energy agent collects signals
- Auto-commits results to memory/

### 7:30 AM - CI Triggers  
- Tests run automatically
- Documentation updates
- Telegram notification if issues

### Manual Development
1. Create feature branch
2. Use appropriate model for task complexity
3. Submit PR
4. CI validates changes
5. Auto-merge if tests pass

## Model Performance

| Model | Speed | Quality | Cost | Best For |
|-------|--------|---------|------|----------|
| Opus | Slow | Excellent | High | Architecture |
| Qwen 2.5 | Fast | Very Good | Free | Coding |
| DeepSeek R1 | Fast | Good | Free | Logic |
| Llama 3 | Very Fast | Good | Free | General |

## Cost Optimization

- **90%** of tasks run FREE on local models
- **10%** complex tasks use Claude (~¬£5/day vs previous ¬£50/day)
- Total monthly savings: **~¬£1,350**

---

*Updated: 2026-02-09*
*Auto-generated by OpenClaw Intelligence*